<!DOCTYPE html>
<pre>
<head>
</head>
<html>
#!/usr/bin/env python
#!*-* coding:utf-8 *-*

"""

:mod:`lab02_json` -- JSON Navigation
=========================================

LAB02 Learning Objective: Learn to navigate a JSON file and convert to a 
      python object.

::

 a. Based on a sample Openstack authentication response file, what python 
   syntax would you use to access items in the serviceCatalog? 

   What path would access the publicURL for the DFW CloudServersOpenStack endpoint?

 b. Provide a new dict called compute_api_info and add keys "auth_response",
   "image_ID", and "flavor_ID". Use None for values. Dump compute_api_info 
   to a file in JSON format

 c. Based on analysis of the sample authentication response file, provide 
   the following functions in a new module named compute_api_json.py:
     i. get_token_id() 
     ii. get_tenant_id()
     iii. get_compute_public_URL(region) # solve this programmatically 
                                         # i.e. don't hard code

 d. Also provide these functions using the information given in class:
     i. get_image_ID()  # use an ID of your choosing
     ii. get_flavor_ID()  # return 2
     iv. update_cached_auth_response(auth_object)

"""

if __name__ == "__main__":

    import json
    import sys

    print '\nserviceCatalog path for sample auth response is: auth_response["access"]["serviceCatalog"]'
    print '\npublicURL for the DFW CloudServersOpenStack endpoint is:'
    print '  auth_response["access"]["serviceCatalog"][4]["endpoints"][0]["publicURL"]'

    with open("sample_auth_response",
               mode="r",
             ) as fh:

        auth_response = json.load(fh)

    # build new compute_api_info

    compute_api_info = {"auth_response":None, 
                        "image_ID":None,
                        "flavor_ID":None}

    # cache compute_api_info as JSON

    with open("compute_api_info","w") as compute_api_info_fh:
        json.dump(compute_api_info, 
                  compute_api_info_fh)
    
</body></html>

